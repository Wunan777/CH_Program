<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
  <script type="text/javascript" src="js/Read.js"></script>
 
	<script type="text/javascript">
    window.onload = function(){
    	   
          var btn1 = document.getElementById('btn1');
          var r0,r1;
          // var pc = 2000;
          var cursor = 0;
          var sp = [];

          var port_80 ;
          var port_81 = "00";

          var memory = ['880','123','0012'];
          //memory  = [and,add,sub,add,sub,jr];

          var table_fn = {
          	'00':ADD,
          	'01':SUB,
          	'02':AND,
          	'03':CMP,
          	'88':MVRD
          }

          btn1.addEventListener('click',function(){ cursor = 6 ;})

          execute( memory[cursor] );// 

	  }

    ///// 链式 fn excute(fn_next) 等待fn执行 excute(fn_next)执行; 
    ////       fn_next excute(fn_next_next) 等待fn_next执行 excute(fn_next_next);
    function E_To_Fn(str)
    {
      if( str.length < 2)
      {
      	 return null;
      }
      else
      {  
      	 return table_fn[]
      }
    }
    function execute(str)
    {  
       // 
          var fn = 
          setTimeout(fn,3000);
          console.log(fn+" is add to loop");
       //

       console.log("cursor before is"+cursor);
       cursor++;
       if( cursor <= 5 )
       {   
          console.log("execute "+memory[cursor] +" is add to loop");
          setTimeout( execute,3000,memory[cursor]);
       }
       else
       {
          console.log("End!");
       }
        
    }
    
    function ADD()
    {
      console.log("add is done");
    }
    function SUB()
    {
      console.log("sub is done");
    }

	</script>
</head>
<body>
  <div id="btn1">click!</div>
</body>
</html>